/**
 * jQuery ddTools Plugin
 * @version 1.8.6 (2014-04-28)
 * 
 * @uses jQuery 1.10.2
 * 
 * @copyright 2014, DivanDesign
 * http://www.DivanDesign.biz
 */

(function(b){b.ddTools={$html:b(),$window:b(),$body:b(),windowWidth:0,windowHeight:0,scrollbarSize:0,cookieOpt:{expires:365,path:"/"},ddErrorData:{title:"\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 =(",message:"\u0412\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0443\u0436\u0430\u0441\u043d\u043e\u0435 \u0438 \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435.<br />\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435.",
email:"info@divandesign.ru",$dialog:!1},objectToJSON:function(a){if(JSON&&b.isFunction(JSON.stringify))return JSON.stringify(a);var c=[],d=b.isPlainObject(a),e="",f="";d?(e="{",f="}"):b.isArray(a)&&(e="[",f="]");for(var k in a){var g=a[k];b.isPlainObject(g)||b.isArray(g)?g=b.ddTools.objectToJSON(g):"number"!=b.type(g)&&(g='"'+g+'"');d?c.push('"'+k+'":'+g):b.isArray(a)&&c.push(g)}return e+c.join(",")+f},numberFormat:function(a){return a.toString().replace(/(\d)(?=(\d{3})+\D|(\d{3})+$)/g,"$1 ")},parseInt:function(a){a=
"undefined"==b.type(a)?"0":a+"";return(a=parseInt(a.replace(/[^\d-]/g,""),10))||0},parseFloat:function(a,c){a="undefined"==b.type(a)?"0":a+"";a=parseFloat(a.replace(/[^\d\-\+.,]/g,"").replace(/,/g,"."))||0;b.isNumeric(c)&&(a=parseFloat(a.toFixed(c)));return a||0},padej:function(a,b){b=b.split(",");var d=a%100;if(10<=d&&19>=d)return b[0];d=a%10;return 1==d?b[1]:1<d&&5>d?b[2]:b[0]},preloadImages:function(){var a=!1;"function"==typeof arguments[arguments.length-1]&&(a=arguments[arguments.length-1]);
var c,d,e,f=b.type(arguments[0]);"array"==f?(c=arguments[0],d=c.length):(c=arguments,d=c.length-1);for(var k=d,g=0;g<=d;g++)e="object"==f?b(c[g]).attr("src"):c[g],"string"==b.type(e)&&b(new Image).on("load",function(){1>--k&&"function"==typeof a&&a()}).attr("src",e)},parseChunkAssoc:function(a,c,d){var e=function(a,c){var d={};c||(c="");for(var l in a)b.isPlainObject(a[l])?b.extend(d,e(a[l],c+l+".")):d[c+l]=a[l];return d};c=e(c);for(var f in c)a=a.replace(RegExp("\\[\\+"+f+"\\+\\]","gm"),c[f]);d&&
(a=a.replace(/\[\+\S+\+\]/gm,""));return a},getDate:function(a){a=b.extend({date:"",format:"d.m.y",shortFormat:"",curDate:"",lang:"ru2",lowerCase:!0},a||{});var c=function(a){""==a?a=new Date:(a=new Date(a),b.isNumeric(a.getTime())||(a=new Date));return a},d=function(a,b){return(a+="").length<b?Array(++b-a.length).join("0")+a:a},e,f,k,g;"en"==a.lang?(e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},k=" January February March April May June July August September October November December".split(" "),
g=["Today","Yesterday","Day before yesterday"]):(e="\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0412\u0442\u043e\u0440\u043d\u0438\u043a \u0421\u0440\u0435\u0434\u0430 \u0427\u0435\u0442\u0432\u0435\u0440\u0433 \u041f\u044f\u0442\u043d\u0438\u0446\u0430 \u0421\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),f={1:"\u043e\u0435",2:"\u043e\u0435",3:"\u0435\u0435",21:"\u043e\u0435",22:"\u043e\u0435",23:"\u0435\u0435",
31:"\u043e\u0435"},g=["\u0421\u0435\u0433\u043e\u0434\u043d\u044f","\u0412\u0447\u0435\u0440\u0430","\u041f\u043e\u0437\u0430\u0432\u0447\u0435\u0440\u0430"],k="ru"==a.lang?" \u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "):
" \u042f\u043d\u0432\u0430\u0440\u044f \u0424\u0435\u0432\u0440\u0430\u043b\u044f \u041c\u0430\u0440\u0442\u0430 \u0410\u043f\u0440\u0435\u043b\u044f \u041c\u0430\u044f \u0418\u044e\u043d\u044f \u0418\u044e\u043b\u044f \u0410\u0432\u0433\u0443\u0441\u0442\u0430 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u041e\u043a\u0442\u044f\u0431\u0440\u044f \u041d\u043e\u044f\u0431\u0440\u044f \u0414\u0435\u043a\u0430\u0431\u0440\u044f".split(" "));a.curDate=c(a.curDate);a.date=""==a.date?a.curDate:c(a.date);
""!=a.shortFormat&&(c=a.curDate.getDate()-a.date.getDate(),1>c?a.format=a.shortFormat.replace("short",g[0]):2>c?a.format=a.shortFormat.replace("short",g[1]):3>c&&(a.format=a.shortFormat.replace("short",g[2])));var h={d:function(){return d(h.j(),2)},D:function(){t=h.l();return t.substr(0,3)},j:function(){return a.date.getDate()},l:function(){return e[h.w()]},N:function(){return h.w()+1},S:function(){return f[h.j()]?f[h.j()]:"th"},w:function(){return a.date.getDay()},z:function(){return(a.date-new Date(a.date.getFullYear()+
"/1/1"))/864E5>>0},W:function(){var b=h.z(),c=364+h.L()-b,d=((new Date(a.date.getFullYear()+"/1/1")).getDay()||7)-1;return 2>=c&&(a.date.getDay()||7)-1<=2-c?1:2>=b&&4<=d&&b>=6-d?(b=new Date(a.date.getFullYear()-1+"/12/31"),date("W",Math.round(b.getTime()/1E3))):1+(3>=d?(b+d)/7:(b-(7-d))/7)>>0},F:function(){return k[h.n()]},m:function(){return d(h.n(),2)},M:function(){t=h.F();return t.substr(0,3)},n:function(){return a.date.getMonth()+1},t:function(){var b;return 2==(b=a.date.getMonth()+1)?28+h.L():
b&1&&8>b||!(b&1)&&7<b?31:30},L:function(){var a=h.Y();return a&3||!(a%100)&&a%400?0:1},Y:function(){return a.date.getFullYear()},y:function(){return(a.date.getFullYear()+"").slice(2)},a:function(){return 11<a.date.getHours()?"pm":"am"},A:function(){return h.a().toUpperCase()},B:function(){var b=60*(a.date.getTimezoneOffset()+60),b=3600*a.date.getHours()+60*a.date.getMinutes()+a.date.getSeconds()+b,b=Math.floor(b/86.4);1E3<b&&(b-=1E3);0>b&&(b+=1E3);1==String(b).length&&(b="00"+b);2==String(b).length&&
(b="0"+b);return b},g:function(){return a.date.getHours()%12||12},G:function(){return a.date.getHours()},h:function(){return d(h.g(),2)},H:function(){return d(a.date.getHours(),2)},i:function(){return d(a.date.getMinutes(),2)},s:function(){return d(a.date.getSeconds(),2)},O:function(){var b=d(Math.abs(a.date.getTimezoneOffset()/60*100),4);return b=0<a.date.getTimezoneOffset()?"-"+b:"+"+b},P:function(){var a=h.O();return a.substr(0,3)+":"+a.substr(3,2)},c:function(){return h.Y()+"-"+h.m()+"-"+h.d()+
"T"+h.h()+":"+h.i()+":"+h.s()+h.P()},U:function(){return Math.round(a.date.getTime()/1E3)}};g=a.format.replace(/[\\]?([a-zA-Z])/g,function(a,b){return a!=b?b:h[b]?h[b]():b});a.lowerCase&&(g=g.toLowerCase());return g}};b.fn.ddGetRealImageSize=function(){var a=b(this),c={width:b.ddTools.parseInt(a.get(0).naturalWidth),height:b.ddTools.parseInt(a.get(0).naturalHeight)};if(0>=c.width||0>=c.height)a=a.eq(0).clone().appendTo(b.ddTools.$body).hide(),0<a.length&&(a.removeAttr("width"),a.removeAttr("height"),
a.attr("style","width: auto !important; height: auto !important;"),c.width=a.width(),c.height=a.height(),a.remove());return c};b.ddCookieForm={defaults:{cookieName:!1,data:!1,fieldsSelector:'input[type="text"],input[type="email"]',cookieOpt:b.ddTools.cookieOpt,writeEmptyVal:!1},cookieToObj:function(a){var c;if(a.cookieName)if(b.cookie(a.cookieName))try{c=b.parseJSON(b.cookie(a.cookieName))}catch(d){c=!1}else b.cookie(a.cookieName,"",a.cookieOpt),c=!1;else c=!1;return c}};b.fn.ddFormToCookie=function(a){a=
b.extend({},b.ddCookieForm.defaults,a);var c=b.ddCookieForm.cookieToObj(a);c||(c={});b(this).each(function(){b(this).find(a.fieldsSelector).each(function(){var d=b(this),e=d.val();if(a.writeEmptyVal||""!=e)c[d.attr("name")]=e})});a.cookieName&&b.cookie(a.cookieName,b.ddTools.objectToJSON(c),a.cookieOpt);return c};b.fn.ddCookieToForm=function(a){a=b.extend({},b.ddCookieForm.defaults,a);var c=b.ddCookieForm.cookieToObj(a);if(!c)if(a.data)c=a.data;else return b(this);return b(this).each(function(){var d=
b(this).find(a.fieldsSelector),e;for(e in c){var f=d.filter("[name="+e+"]");0<f.length&&(a.writeEmptyVal||""!=c[e])&&f.val(c[e])}})};b.fn.ddMaxLength=function(a){a=b.extend({},{max:150,containerSelector:!1,parentSelector:!1,suffixSelector:!1,suffix:"\u043e\u0432,,\u0430",errorClass:"maxLengthError",warningClass:"maxLengthError",canWriteError:!0,minProcent:7},a);var c=a.max/100*a.minProcent,d=function(d,f,k){f=a.max-f;0>f||f<c?d.removeClass(a.warningClass).addClass(a.errorClass):f<2*c?d.removeClass(a.errorClass).addClass(a.warningClass):
d.removeClass(a.warningClass).removeClass(a.errorClass);d.text(f);k&&k.text(b.ddTools.padej(f,a.suffix))};return b(this).each(function(){var c=b(this),f=c.val();if(a.containerSelector){var k;k=a.parentSelector?c.parents(a.parentSelector+":first"):c.parent();var g=k.find(a.containerSelector),h;a.suffixSelector&&(h=k.find(a.suffixSelector))}g&&d(g,f.length,h);a.canWriteError||c.val(f.substring(0,a.max));c.on("keyup",function(){var c=b(this),e=c.val();if(!a.canWriteError&&e.length>a.max)return c.val(e.substring(0,
a.max)),!1;g&&d(g,e.length,h);return!0})})};b.fn.ddFormWithPlaceholders=function(a){a=b.extend({placeholderSelector:"label"},a||{});return b(this).each(function(){var c=b(this);b(a.placeholderSelector,c).on("click",function(){b(this).prev("input, textarea").trigger("focus")}).on("mouseenter",function(){b(this).prev("input, textarea").addClass("hover")}).on("mouseleave",function(){b(this).prev("input, textarea").removeClass("hover")});c.find('input[type="text"], input[type="password"], textarea').on("focus",
function(){b(this).next(a.placeholderSelector,c).hide()}).on("blur",function(){""==b.trim(b(this).val())?b(this).next(a.placeholderSelector,c).show():b(this).next(a.placeholderSelector,c).hide()}).trigger("blur")})};b.fn.ddFixed=function(a){a=b.extend({fixedClass:"fixed",margin:0,clone:!0,cloneCopyAttrs:!1},a||{});return b(this).each(function(){var c=b(this),d=!1,e;a.clone&&(e=b("<div></div>"),a.cloneCopyAttrs&&(e.attr("class",c.attr("class")),e.attr("style",c.attr("style"))),b.ddTools.$window.on("resize",
function(){d||e.css({width:c.outerWidth(!0),height:c.outerHeight(!0)})}).trigger("resize"));b.ddTools.$window.on("load",function(){var f=c.offset().top-a.margin;b.ddTools.$window.on("scroll",function(){b.ddTools.$window.scrollTop()>=f?d||(c.addClass(a.fixedClass).trigger("ddFixed",[!0]),a.clone&&e.insertAfter(c),d=!0):d&&(c.removeClass(a.fixedClass).trigger("ddFixed",[!1]),a.clone&&e.remove(),d=!1)}).trigger("scroll")})})};b.fn.ddActiveScroll=function(a){a=b.extend({distance:50,event:"click"},a||
{});return b(this).each(function(){var c=b(this);b.ddTools.$window.on("scroll load",function(){b.ddTools.$window.scrollTop()+b.ddTools.windowHeight+a.distance>=c.offset().top&&c.trigger(a.event)})})};b.fn.ddNumeric=function(a){a=b.extend({allowFloat:!0,decimals:0,allowEmpty:!1,chars:"!@#$%^&*()+=[]\\';/{}|\":<>?~` abcdefghijklmnopqrstuvwxyz\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044c\u044a\u044b\u044d\u044e\u044fABCDEFGHIJKLMNOPQRSTUVWXYZ\u0410\u0411\u0412\u0413\u0414\u0415\u0401\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042c\u042a\u042b\u042d\u042e\u042f"},
a||{});a.allowFloat||(a.chars+=".,");a.decimals=b.ddTools.parseInt(a.decimals);0==a.decimals&&(a.decimals=!1);return b(this).on("change",function(){var c=b(this),d=c.val();a.allowEmpty&&0==d.length||(a.allowFloat?c.val(b.ddTools.parseFloat(d,a.decimals)):c.val(b.ddTools.parseInt(d)))}).on("keypress",function(b){var d;d=b.charCode?String.fromCharCode(b.charCode):String.fromCharCode(b.which);-1!=a.chars.indexOf(d)&&b.preventDefault();b.ctrlKey&&"v"==d&&b.preventDefault()})};b.each({ddSlideDown:{opacity:"show",
height:"show","padding-top":"show","padding-bottom":"show","margin-top":"show","margin-bottom":"show"},ddSlideUp:{opacity:"hide",height:"hide","padding-top":"hide","padding-bottom":"hide","margin-top":"hide","margin-bottom":"hide"},ddSlideToggle:{opacity:"toggle",height:"toggle","padding-top":"toggle","padding-bottom":"toggle","margin-top":"toggle","margin-bottom":"toggle"}},function(a,c){b.fn[a]=function(a,b,f){return this.animate(c,a,b,f)}});b.fn.ddCssAnimate=function(a,c,d){for(var e in arguments)b.isPlainObject(arguments[e])?
a=arguments[e]:b.isNumeric(arguments[e])?c=arguments[e]:b.isFunction(arguments[e])&&(d=arguments[e]);b.isNumeric(c)||(c=300);var f=!1,k=!1,g=b.isFunction(d);b.each(a,function(b,c){"hide"==c?(f=!0,a[b]=0):"show"==c&&(k=!0,a[b]="")});return b(this).each(function(){var e=b(this);k&&e.show();setTimeout(function(){e.css(a)},10);(f||g)&&setTimeout(function(){f&&e.hide();g&&d()},c)})};b(function(){b.ddTools.$html=b("html");b.ddTools.$window=b(window);b.ddTools.$body=b("body");b.ddTools.$window.on("resize",
function(){b.ddTools.windowWidth=b.ddTools.$window.width();b.ddTools.windowHeight=b.ddTools.$window.height()}).trigger("resize");var a=b("<div></div>").css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px","z-index":"0"}).appendTo(b.ddTools.$body);b.ddTools.scrollbarSize=a.get(0).offsetWidth-a.get(0).clientWidth;a.remove();b.ddTools.$body.on("ddError",function(a){if(!b.isPlainObject(a.ddError)||b.isEmptyObject(a.ddError))a.ddError={};a.ddError.title&&a.ddError.message||
(a.ddError=b.extend({title:b.ddTools.ddErrorData.title,message:b.ddTools.ddErrorData.message},a.ddError));a.ddError.target||(a.ddError.target="unknown_"+window.location.toString());a.ddError.message+='<br /><small>\u0410 \u0435\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0435 \u0442\u0440\u0443\u0434\u043d\u043e, \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u043d\u0430 <a href="mailto:'+b.ddTools.ddErrorData.email+'">'+b.ddTools.ddErrorData.email+'</a> \u0430\u0434\u0440\u0435\u0441 \u0441\u0430\u0439\u0442\u0430 \u0438 \u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438: "'+
a.ddError.target+'".</small>';b.ddTools.ddErrorData.$dialog?(b.ddTools.ddErrorData.$dialog.data("ddMessage",a.ddError.message),b.ddTools.ddErrorData.$dialog.dialog("option","title",a.ddError.title),b.ddTools.ddErrorData.$dialog.dialog("open")):console&&b.isFunction(console.log)&&console.log(a.ddError)})})})(jQuery);